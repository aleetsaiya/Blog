---
title: m3u8格式介紹
date: 2021-06-09 15:24:40
---
## m3u8格式
今天在看文章的時候發現這個格式，就了解了一下關於 m3u8 檔到底是什麼 ，底下附上文章裡面介紹的很詳盡。

參考 : [【全网最全】m3u8到底是什么格式？一篇文章搞定m3u8下载](https://zhuanlan.zhihu.com/p/346683119)

通常來說在傳輸一個影片的時候，我們會把一個影片切成一片一片的來傳輸，這樣可以使我們的傳輸速度提高，也可以增加使用者體驗。假設我們切出來的影片為數個 `.ts` 檔，我們就需要一個文件來幫助我們將這些 ts 檔的下載位置存起來，讓網站能夠根據這個文件來獲得這些影片片段 ( `.ts`檔 )，而這份索引文件就是 `.m3u8` 文件。所以如果你今天想下載一個影片的話，可以按 `F12` 從 Network 找出 `.m3u8` 檔的封包，下載檔案後經過工具處理我們可以得到文件內 `.ts` 的下載鏈結，然後再根據這些鏈結將 ts檔 轉換為 mp4 檔就完成了。

有興趣的可以看 : 
+ [m3u8-to-mp4.md](https://gist.github.com/tzmartin/fb1f4a8e95ef5fb79596bd4719671b5d)
+ [利用ffmpeg合併m3u8串流影片，並且轉成MP4格式](https://shimeche.github.io/2017/04/13/%E5%88%A9%E7%94%A8ffmpeg%E5%90%88%E4%BD%B5m3u8%E4%B8%B2%E6%B5%81%E5%BD%B1%E7%89%87%EF%BC%8C%E4%B8%A6%E4%B8%94%E8%BD%89%E6%88%90MP4%E6%A0%BC%E5%BC%8F/)
+ [How to Use VLC to Convert .M3U8 File to MP4 for Free](https://www.easefab.com/tutorial/vlc-convert-m3u8-to-mp4.html)

如果是追求方便的話推薦使用 VLC ，ffmpeg 需要在 cmd 上進行操作。

## 相關詞彙
在使用 ffmpeg 或是 vlc 的時候，碰到一些之前沒看過的詞彙。
### mux、demux
參考 : [关于音视频的一些知识（demux、filter等）](https://my.oschina.net/jerikc/blog/476953)
簡單來說 mux 就是影音合併，demux 就是將影音分離。
### codec
來自 coder 與 decoder ，就是編解碼器的意思。( ex. H.264 codec )

## 操作過程
我是使用 ffmpeg 來幫我將 m3u8 檔轉換為 mp4 檔的，參考的文件就是上面提供的 ffmpeg 相關文章。而自己操作下來會發現如果先將 m3u8 檔下載好，然後進行轉換的話會出現錯誤如下

指令 : 
```bash
ffmpeg -i "720p.m3u8" -c copy file.mp4
```
錯誤訊息 : 
```Bash
Error when loading first segment '720p_000.ts'
720p.m3u8: Invalid data found when processing input
```

修復方法 : 
只要將 m3u8 在地檔改成下載鏈結就解決了。
```Bash
ffmpeg -i "https://..." -c copy file.mp4
```